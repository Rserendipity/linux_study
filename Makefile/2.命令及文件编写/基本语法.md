# 一、Makefile文件/make命令

## 1.Makefile文件

### 基本命令

```c
[目标]: [依赖项] ...
[tab键] [@][命令]
```

- **目标**
  - 一般是要编译成的文件
- **依赖**
  - 执行当前目标所需要的**文件**/**目标**/**需要的库**等等
  - 由于可以依赖其他的目标，所以**可以嵌套**
- **命令**
  - 该目标具体要执行的命令，**可以没有**，**也可以有多个**
  - @:可以关闭指令回显，不加的话会在命令行显示当前执行的命令

### 例子

```c
test: a.o
    gcc a.o -o test // 前面的空白字符一定要是 tab 即'\t'字符
```

分析：

- **test**
  - **生成目标**
- **a.o**
  - **依赖项**
- **gcc a.o -o test**
  - 执行命令

### 特殊命令：清理

```c
clean: // 清理项目的中间文件
    rm -f a.out *.o
```

> 命令行中使用make的清理@：make clean 即可清除中间文件

## 2.make命令

make 【options】【target】

- options: **可省略**
  - -f 指定一个文件作为 Makefile 文件
  - -n 只输出命令但不执行
  - -s 只执行但不输出命令，和Makefile中命令前加@作用一样
  - -w 显示执行前后的路径
  - -C [dir] 指定 Makefile 执行的所在目录
- target: **可省略**，默认用当前目录下的Makefile文件，不存在则会报错
  - 执行make的文件

更多的命令可以用-h参数查看

---
